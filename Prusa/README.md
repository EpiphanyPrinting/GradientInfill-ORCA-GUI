# Gradientinfill for Prusa slicer
## Introduction what changed?:
This is a fork of the repository of CNC-Kitchen. I didn't change the working principal of the script. I mainly adapted the comments within the gcode file to suit those generated by Prusa slicer and changed a few things which resulted in errors previously. To understand better how the script works, i recommend watching the YouTube video and reading the README.md in the mainfolder. There you can also find instructions to install python (I'm using python 3.9.18 with the anaconda distribution). To my knowledge this is the first version working in Prusa slicer. If i'm mistaken, please let me know.

### First example print:
![](pictures/IMG_20240321_223411411.jpg)

## Features:
- The script can be called dirctly after slicing with an optional dialog in the terminal, which will automatically open (``run_in_slicer = True``)
- It's also possible to run the script inside of an IDE (``run_in_slicer = False``)
- If the script didn't do any changes it will print a message. This means something went wrong.
- If a bug occures the error message will be written inside of the terminal. When this happens please review, that all of the entered settings are correct. Open an issue here at this repository and share all your variables and the error message to get help.
- The first line of gcode will automatically be removed, which contains information, which version of the slicer has been used. Without deleting the line Prusa gcode previewer will render the gcode based on the settings written at the end of the gcode <u>*not the actual gcode*</u>. This would give you a wrong impression of the actual gcode, which is why it's automatically removed.

## Slicer settings (enable expert mode):
### Disable Arc fitting in print settings-> advanced:
![alt text](<pictures/Screenshot 2024-03-21 231928.png>)

### Use relative extrusion in printer settings-> general:

![Relative extrusion](<pictures/Screenshot 2024-03-21 232256.png>)

### Infill before perimiter need to be turned off printer settings-> infill:

![Infill](pictures/image.png)

### Automatically call script when saving the file:
![alt text](pictures/image-2.png)

Insert the path to your python.exe followed by the path to the python script in print settings -> output options.

## Running script:
**Do not upload the gcode file directly to your printer**. The output of the script are two gcodes. One file is the unmodifyed gcode of the slicer and the other is the modifyed one. Only the unmodifyed version will be uploaded to your printer (my expirience with Mainsail).

The preview inside of the slicer doesn't show the changes of the script.

### Investigate the modifyed gcode (recommended):
The following steps are recommended and should be perfomed everytime, until you trust the script. There might be errors specific to your gcode, which i haven't thought of. Those could potentially damage your printer.

Open the file inside of the Prusa gcode viewer, to take a look at the modifyed gcode. If you are not happy with the result run the script again with different parameters. You can refresh the gcode preview by pressing F5.
![alt text](pictures/image-3.png)

When you are happy with the result open the two files inside of notepad++ and compare both files with a plugin called "compare". The program will mark all of the changes in between both files. This is the safest check, since the gcode previewer can give a wrong impression.

## General advice:
Experiment with the different parameters. For me a ``MAX_FLOW = 350`` was set to high and 250 worked better.

Print small test pieces to test your settings. If you modify a big file the computing time can be several minutes long.

## Prospect for the future:
I will try to optimise the calculation time of the script. Once i have enough confidence in the program, i will add the option to only get one output file.
With your help i will debug the script for errors, which might occur.

### Orca slicer:
I am also working on a version for Orca slicer, but did have some unexpected problems. The general script seems to work, but calling it from the slicer doesn't work yet. The gcode preview doesn't seem to work in any previewer tested so far. I will add the script to a different folder in this repository, once i found the issues.

You may also be interested in my own postprocessing scripts, which can be found [here](https://github.com/WatchingWatches/Post_processing_gcode).

Thank you for you feedback in advance. Also feel free to adapt the script to other slicers too.